# Reduce escape time for faster key recognition
set -sg escape-time 10

# Enable true color support
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Use ctrl+A like screen
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Screen-like bindings
bind A command-prompt "rename-window '%%'"
bind S split-window -v
bind | split-window -h
bind Tab select-pane -t :.+
bind k confirm-before -p "kill-window? (y/n)" kill-window
bind a send-prefix

# Keep ctrl+A ctrl+A for last window (screen behavior)
bind C-a last-window

# Allow ctrl+A ctrl+<key> to work same as ctrl+A <key> (screen behavior)
bind C-n next-window
bind C-p previous-window
bind C-c new-window
bind C-d detach-client
bind C-k confirm-before -p "kill-window? (y/n)" kill-window
bind Escape copy-mode
bind C-] paste-buffer

# Command prompt styling (light pastel green)
set -g message-style "fg=colour158,bg=black"
set -g message-command-style "fg=colour158,bg=black"

# Escape exits command prompt
set -g status-keys emacs

# Move window to index and follow it
bind . command-prompt -p "Move to index:" "move-window -t :%1"
bind / command-prompt -p "Swap with index:" "run-shell 'tmux swap-window -t :%1 && tmux select-window -t :%1'"

# Status bar styling (screen-like)
set -g status-style "bg=black,fg=white"
set -g status-left "#[fg=green][#[fg=white,bold] #h #[nobold,fg=green]]#[fg=default]"
set -g status-left-length 20
set -g status-right "#[fg=green][#[fg=white,bold] %d/%m %H:%M #[nobold,fg=green]]#[fg=default]"
set -g status-right-length 20
set -g status-justify centre

# Window list styling
set -g window-status-format " #I #W "
set -g window-status-current-format "#[fg=cyan](#[fg=white,bold] #I #W #[nobold,fg=cyan])"
set -g window-status-separator " "

# Bell: flag window with '!' when it receives a bell character
set -g monitor-bell on
set -g bell-action other

# Use vi mode for copy mode
set -g mode-keys vi

# Copy mode: space to start selection, space again to copy (like screen)
bind -T copy-mode-vi Space if-shell -F "#{selection_present}" "send-keys -X copy-selection-and-cancel" "send-keys -X begin-selection"

# Escape exits copy mode
bind -T copy-mode-vi Escape send-keys -X cancel
